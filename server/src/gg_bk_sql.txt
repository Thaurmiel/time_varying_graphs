use gg_bk;
CREATE TABLE IF NOT EXISTS 'ROOMS'(
  'id' INT NOT NULL AUTO_INCREMENT, 
  'r_name' VARCHAR(255) NOT NULL DEFAULT 'ROOM', 
  'r_type' VARCHAR(255) NOT NULL DEFAULT 'BIG', 
  PRIMARY KEY ('id')
) ENGINE = InnoDB;
CREATE TABLE IF NOT EXISTS SENSORS (
  'id' INT NOT NULL AUTO_INCREMENT, 
  s_name VARCHAR(255) NOT NULL, 
  s_room_ 'id' INT NOT NULL, 
  INDEX (s_room_id), 
  FOREIGN KEY (s_room_id) REFERENCES ROOMS(id) ON UPDATE CASCADE ON DELETE CASCADE, 
  PRIMARY KEY (id)
) ENGINE = InnoDB;
CREATE TABLE IF NOT EXISTS OU (
  'id' INT NOT NULL AUTO_INCREMENT, 
  ou_name VARCHAR(255) NOT NULL, 
  ou_master INT NOT NULL, 
  INDEX (ou_master), 
  FOREIGN KEY (ou_master) REFERENCES OU(id) ON UPDATE CASCADE ON DELETE CASCADE, 
  PRIMARY KEY (id)
) ENGINE = InnoDB;
CREATE TABLE IF NOT EXISTS TEAMS (
  'id' INT NOT NULL AUTO_INCREMENT, 
  t_name VARCHAR(255) NOT NULL, 
  t_ou_ 'id' INT NOT NULL DEFAULT 1, 
  INDEX (t_ou_id), 
  FOREIGN KEY (t_ou_id) REFERENCES gg_bkOU(id) ON UPDATE CASCADE ON DELETE CASCADE, 
  PRIMARY KEY (id)
) ENGINE = InnoDB;
CREATE TABLE IF NOT EXISTS WORKERS (
  'id' INT NOT NULL AUTO_INCREMENT, 
  w_name VARCHAR(255) NOT NULL, 
  w_team_ 'id' INT NOT NULL DEFAULT 1, 
  w_ou_ 'id' INT NOT NULL, 
  INDEX (w_team_ 'id'), 
  FOREIGN KEY (w_team_ 'id') REFERENCES TEAMS ('id') ON UPDATE CASCADE ON DELETE CASCADE, 
  INDEX (w_ou_ 'id'), 
  FOREIGN KEY (w_ou_ 'id') REFERENCES OU ('id') ON UPDATE CASCADE ON DELETE CASCADE, 
  PRIMARY KEY ('id')
) ENGINE = InnoDB;
CREATE TABLE IF NOT EXISTS MEETINGS (
  'id' INT NOT NULL AUTO_INCREMENT, 
  m_name VARCHAR(255) NOT NULL, 
  m_start_time INT NOT NULL DEFAULT UNIX_TIMESTAMP(), 
  m_end_time INT NOT NULL DEFAULT DATE_ADD(
    CURRENT_TIMESTAMP, INTERVAL 1 HOUR
  ), 
  m_room_ 'id' INT NOT NULL, 
  INDEX (m_room_ 'id'), 
  FOREIGN KEY (m_room_ 'id') REFERENCES ROOMS ('id') ON UPDATE CASCADE ON DELETE CASCADE, 
  PRIMARY KEY ('id')
) ENGINE = InnoDB;
CREATE TABLE IF NOT EXISTS SENSOR_EVENTS (
  'id' INT NOT NULL AUTO_INCREMENT, 
  s_ 'id' INT NOT NULL, 
  w_ 'id' INT NOT NULL, 
  event_time INT NOT NULL DEFAULT UNIX_TIMESTAMP(), 
  event_type VARCHAR(10) NOT NULL DEFAULT 'IN', 
  INDEX (s_ 'id'), 
  FOREIGN KEY (s_ 'id') REFERENCES SENSORS ('id') ON UPDATE CASCADE ON DELETE CASCADE, 
  INDEX (w_ 'id'), 
  FOREIGN KEY (w_ 'id') REFERENCES WORKERS ('id') ON UPDATE CASCADE ON DELETE CASCADE, 
  PRIMARY KEY ('id')
) ENGINE = InnoDB;
